!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.jQueryTextWrapper=n()}(this,function(){"use strict";function t(t,e,o){var r=t.val().slice(t.prop("selectionStart"),t.prop("selectionEnd"));if(r){var i=n(t.val(),t.prop("selectionStart"),t.prop("selectionEnd"),e+r+o);t.val(i)}}function n(t,n,e,o){return t.slice(0,n)+o+t.slice(e)}function e(t){return"className"===t?"class":t}function o(t,n){return Array.isArray(t)?n?t.slice():t:[]}function r(t){return $.fn.textWrapper.defaults&&$.fn.textWrapper.defaults.definitions?[].concat($.fn.textWrapper.defaults.definitions,o(t)):o(t,!0)}var i=function(){function t(t){return o.indexOf(t)>=0}function n(t){return r[t]?r[t]:String.fromCharCode(t)}function e(){i.forEach(function(t){o.join("+")===t.combination&&t.callback()})}var o=[],r={17:"CTRL"},i=[];this.handleKeyDown=function(r){var i=n(r.which);if(!1!==t("CTRL")||17===r.which)return o.indexOf(i)<0?(r.preventDefault(),o.push(i),e(),!1):void 0},this.handleKeyUp=function(t){var r=n(t.which);o.indexOf(r)>=0&&(o.splice(o.indexOf(r),1),e())},this.onPress=function(t,n){i.push({combination:t,callback:n})}},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return $(document).ready(function(){$.fn.textWrapper=function(n){var o=r(n.definitions),f=$(this),u=new i;f.keydown(u.handleKeyDown),f.keyup(u.handleKeyUp),o.map(function(n){var o=$('<button type="button">'+n.label+"</button>"),r=function(){t(f,n.startTag,n.endTag)};return o.click(r),"object"===c(n.attr)&&null!==n.attr&&Object.keys(n.attr).forEach(function(t){o.attr(e(t),n.attr[t])}),"string"==typeof n.shortcut&&u.onPress(n.shortcut,r),o}.bind(this)).forEach(function(t){n.buttonContainer.append(t)})}}),{}});
